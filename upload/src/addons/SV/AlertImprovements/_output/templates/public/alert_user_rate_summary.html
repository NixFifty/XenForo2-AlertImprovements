<xf:set var="$rating">
	<xf:macro template="sv_contentratings_macros" name="rating_type"
		arg-ratingType="{$alert.sv_rating_type}"
		arg-text="{$alert.sv_rating_type.title}"
		arg-inline="1" />
</xf:set>

<xf:if is="{$extra.likesPhrase}">
	<xf:set var="$likeString">
		<xf:foreach loop="$extra.likes" key="$contentType" value="$count">
			{$extra.likesPhrase.{$contentType}}
		</xf:foreach>
	</xf:set>
	
	{{ phrase('sv_x_rated_y_content_z_times_with_l_likes', {
		'count': {$extra.totalRatings},
		'name': username_link($user, false, {'defaultname': $alert.username}),
		'link': link('account/alert', false, {'alert_id': $alert.alert_id}),
		'ratings': {$rating},
		'likedcontent': {$likeString}
	}) }}
<xx:else />
	{{ phrase('sv_x_rated_y_content_z_times', {
		'count': {$extra.totalRatings},
		'name': username_link($user, false, {'defaultname': $alert.username}),
		'link': link('account/alert', false, {'alert_id': $alert.alert_id}),
		'ratings': {$rating}
	}) }}
</xf:if>